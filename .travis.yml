language: python

# python:
#   - "3.5"


matrix:
  include:
    - os: linux
      python: "3.5"
    - os: osx
      language: generic

# os:
#   - linux
#   - osx

sudo: required

branches:
  only:
  - master
  - develop

addons:
  artifacts:
    paths:
      - webrecorder/webrecorder/standalone/dist/webrecorder_player

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update          ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install python3 ; fi

install:
  - cd webrecorder
  - python setup.py install
  - pip install coverage pytest-cov coveralls
  - pip install pyinstaller

script:
  - python setup.py test
  - cd webrecorder/standalone
  - pyinstaller --clean --additional-hooks-dir ./hooks/ -y -F ./webrecorder_player.py


after_success:
  - coveralls

