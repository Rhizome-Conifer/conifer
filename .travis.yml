# language: python

# python:
#   - "3.5"


matrix:
  include:
    # - os: linux
    #   language: python
    #   python: "3.5"
    #   sudo: false
    - os: osx
      language: generic
      sudo: required

# os:
#   - linux
#   - osx

# sudo: required

branches:
  only:
  - master
  - develop

# addons:
#   artifacts:
#     paths:
#       - webrecorder/webrecorder/standalone/dist/webrecorder_player

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew uninstall python ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew upgrade pyenv ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then PYTHON_CONFIGURE_OPTS="--enable-shared" pyenv install 3.5.3 ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then pyenv global 3.5.3 ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then pip install -U setuptools ; fi
  

  # - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew tap derekkwok/python ; fi
  # - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install python35 ; fi

install:
  - cd webrecorder
  - python setup.py install
  - pip install coverage pytest-cov coveralls
  - pip install pyinstaller

script:
  - python setup.py test
  - cd webrecorder/standalone
  - pyinstaller --clean --additional-hooks-dir ./hooks/ -y -F ./webrecorder_player.py


after_success:
  - coveralls

